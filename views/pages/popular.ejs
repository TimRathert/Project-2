<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ('../partials/head.ejs') %>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/popularStyle.css">
    <title>InstantGramification</title>
    
</head>

    <title>Document</title>
</head>
<body>
    <ul class="popular-list">

        <% for( let i = 0; i < likes.length; i++ ) { %>
             <a href="/images/<%= likes[i].id%>"><img class="popular-img" src="<%= likes[i].url%>" alt="image"></a>
             
             <h2><% if (user) {%>
                <div class="numer-likes">
                <form id="like-btn-form" action="/likes/<%= likes[i].id %>?_method=PUT" method="POST">
                    <div class="like-btn">
                    <input
                    id="like-btn"
                    type="submit" 
                    value="♥️" 
                    class="btn btn-primary btn-lg
                    <% if (likes[i].likedBy.some(obj => obj.id === user.id)) { %>
                        like-btn-liked
                        <% } else { %>
                            like-btn-unliked
                            <% }%>
                            "/>
                        </div>
                        </div>
                        </h2>      
                        </form>
                        <% } %>
       
                 <%= likes[i].likes %>
                 <% } %> 
             
    </ul>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>
</html>
